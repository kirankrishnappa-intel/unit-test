================================================================================
PCIe TEST DRIVER FRAMEWORK - KCONFIG INTEGRATION COMPLETE
================================================================================

Date: February 2, 2026
Status: ✓ Ready for Use

================================================================================
WHAT WAS ADDED
================================================================================

1. unit-test/Kconfig
   - Menu: "Unit Test Framework"
   - 4 configuration options:
     * CONFIG_PCIE_TEST_DRIVER (main)
     * CONFIG_PCIE_TEST_DRIVER_DEBUG (debug flag)
     * CONFIG_BUILD_PCIE_TEST_UTILITY (user-space tool)
     * CONFIG_BUILD_PCIE_TEST_SCRIPTS (test scripts)

2. Updated Kconfig (main)
   - Sources unit-test/Kconfig
   - Integration point for menuconfig

3. Updated unit-test/Makefile
   - Respects CONFIG_PCIE_TEST_DRIVER setting
   - Conditional compilation
   - Debug flag support (CONFIG_PCIE_TEST_DRIVER_DEBUG)

4. Documentation
   - KCONFIG_GUIDE.md (comprehensive guide)
   - KCONFIG_QUICK_REFERENCE.txt (quick reference)
   - KCONFIG_SETUP.txt (this file)

================================================================================
HOW TO USE
================================================================================

Step 1: Open Configuration Menu
  $ cd /home/kirank1/code/git/linux_iosf_test
  $ make menuconfig

Step 2: Navigate to Unit Test Framework
  - Look for "Unit Test Framework" menu
  - Use arrow keys to navigate
  - Press Enter to select

Step 3: Configure Options
  - Press Space to toggle [*] or [ ]
  - Navigate with arrow keys
  
  Options:
  [*] PCIe Test Driver Framework          <- Main enable/disable
  [ ] Enable debug output                 <- Debug logging
  [*] Build PCIe Test Utility             <- User-space tool
  [*] Build PCIe Test Scripts             <- Test automation

Step 4: Save Configuration
  - Select "Save" (usually at bottom)
  - Press Enter to confirm
  - Close menu (Esc key or Exit option)

Step 5: Build Framework
  $ make
  $ cd unit-test
  $ make modules
  $ sudo make load

Step 6: Test It
  $ ./pcie_test_utility list
  $ ./pcie_test_utility info

================================================================================
CONFIGURATION STATES
================================================================================

Fully Enabled (Development):
  CONFIG_PCIE_TEST_DRIVER=y
  CONFIG_PCIE_TEST_DRIVER_DEBUG=y
  CONFIG_BUILD_PCIE_TEST_UTILITY=y
  CONFIG_BUILD_PCIE_TEST_SCRIPTS=y

Minimal (Module Only):
  CONFIG_PCIE_TEST_DRIVER=y
  CONFIG_PCIE_TEST_DRIVER_DEBUG=n
  CONFIG_BUILD_PCIE_TEST_UTILITY=n
  CONFIG_BUILD_PCIE_TEST_SCRIPTS=n

Disabled:
  CONFIG_PCIE_TEST_DRIVER=n
  (All dependent options disabled)

================================================================================
VERIFY CONFIGURATION
================================================================================

After saving menuconfig, verify:

  $ grep CONFIG_PCIE_TEST_DRIVER .config

Check Makefile Integration:

  $ cd unit-test
  $ make info

This shows current CONFIG settings from .config file

================================================================================
BUILD SYSTEM INTEGRATION
================================================================================

The Makefile automatically:

1. Reads CONFIG_PCIE_TEST_DRIVER from .config
2. Only sets obj-m if CONFIG is enabled
3. Applies debug flags if CONFIG_PCIE_TEST_DRIVER_DEBUG=y
4. Respects all conditional compilation rules

When disabled (CONFIG_PCIE_TEST_DRIVER=n):
  - obj-m is empty
  - No module is built
  - No compilation errors

================================================================================
FILES INVOLVED
================================================================================

Configuration:
  /home/kirank1/code/git/linux_iosf_test/Kconfig
  /home/kirank1/code/git/linux_iosf_test/unit-test/Kconfig

Build:
  /home/kirank1/code/git/linux_iosf_test/unit-test/Makefile

Generated by menuconfig:
  /home/kirank1/code/git/linux_iosf_test/.config

================================================================================
EXAMPLES
================================================================================

Example 1: Enable and Build with Debug
  $ make menuconfig
  [Select all options, save]
  $ cd unit-test
  $ make modules
  $ sudo insmod pcie_test_driver.ko debug_level=2

Example 2: Build Module Only
  $ make menuconfig
  [Select PCIE_TEST_DRIVER only, save]
  $ cd unit-test
  $ make modules
  $ sudo insmod pcie_test_driver.ko

Example 3: Disable Framework
  $ make menuconfig
  [Uncheck PCIE_TEST_DRIVER, save]
  $ cd unit-test
  $ make modules
  [Nothing built - CONFIG is disabled]

================================================================================
DOCUMENTATION
================================================================================

For detailed information, see:

  - KCONFIG_GUIDE.md              (Complete guide with examples)
  - KCONFIG_QUICK_REFERENCE.txt   (Quick lookup table)
  - README.md                      (General framework documentation)
  - unit-test/Makefile             (Build implementation)

================================================================================
TROUBLESHOOTING
================================================================================

Problem: Can't find Unit Test Framework in menuconfig
Solution: Make sure you're in the right directory and config files are present
  $ cd /home/kirank1/code/git/linux_iosf_test
  $ ls Kconfig unit-test/Kconfig

Problem: Module not building even though enabled
Solution: Configuration might not be saved
  $ make menuconfig
  [Check status]
  $ grep CONFIG_PCIE_TEST_DRIVER .config

Problem: Options appear grayed out
Solution: Enable parent option (CONFIG_PCIE_TEST_DRIVER) first
  $ make menuconfig
  [Check PCIe Test Driver Framework]

Problem: Changes don't take effect
Solution: Make sure to save in menuconfig and rebuild
  $ make menuconfig
  [Select "Save"]
  $ make clean
  $ make

================================================================================
NEXT STEPS
================================================================================

1. Open menuconfig:
   $ cd /home/kirank1/code/git/linux_iosf_test
   $ make menuconfig

2. Navigate to "Unit Test Framework"

3. Enable PCIe Test Driver Framework:
   [*] PCIe Test Driver Framework

4. Save configuration

5. Build:
   $ make
   $ cd unit-test
   $ make modules

6. Load and test:
   $ sudo make load
   $ ./pcie_test_utility info

================================================================================
SUPPORT
================================================================================

For help:
  - Read KCONFIG_GUIDE.md (comprehensive documentation)
  - Check Makefile comments for build details
  - Review Kconfig syntax in unit-test/Kconfig
  - Check kernel documentation: /usr/src/linux/Documentation/

================================================================================
STATUS: ✓ READY
================================================================================

The PCIe Test Driver Framework is fully integrated into the backport project's
menuconfig system. You can now enable/disable the framework build through the
standard Linux kernel configuration workflow.

Start with: $ make menuconfig

